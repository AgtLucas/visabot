<!DOCTYPE html>
<html lang="en">

<head>
    <title>VisaBot CRS Calculator</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>

<body>
    <div id="question"></div>
    <div id="options"></div>
    <script>
        var question = $("#question");
        var options = $("#options");

        var request = {
            "payload": null,
            "reply": null
        }

        request.payload = {
            question: '1',
            /*name: 'Bruno',
            married: true,
            spouseCanadianCitizen: false,
            spouseCommingAlong: true,
            age: 33,
			educationLevel: 5,
			firstLanguage: {
				test: 0,
				speaking: 7,
				listening: 8,
				reading: 7,
				writing: 7
			},
			workInCanada: 0,
			workExperience: 14,
			certificateFromProvince: false,
			validJobOffer: false,
			nocJobOffer: null,
			nomination: false,
			spouseEducationLevel: 5,
			spouseWorkInCanada: 0*/
        };

        request.reply = "Yes";

        console.log('Request:', request);

        $.ajax({
            type: 'GET',
            url: '/api/canadaExpressEntryFlow/nextFlow',
            cache: false,
            dataType: 'json',
            data: request
        }).success(function (data, textStatus, jqXHR)
        {
            var responseJSON = data.responseJSON;

            question.html(responseJSON.response);
            options.html('');

            if (responseJSON.quickReplies !== null) {
                for (r = 0; r < responseJSON.quickReplies.length; r++) {
                    options.html(options.html() + '<br />' + responseJSON.quickReplies[r]);
                }
            }

            console.log('responseJSON:', responseJSON);
        }).error(function (jqXHR, textStatus, errorThrown)
        {
            console.log('Error: ', jqXHR.responseText);
        });

        var questions = {
            name: { id: '0' },
            maritalStatus: { id: '1', question: "Hi {NAME}. Are you married or has a common-law partner?", options: ['Yes', 'No'] },
            spouseCanadianCitizen: { id: '2i', question: "Is your spouse or common-law partner a citizen or permanent resident of Canada?", options: ['Yes', 'No'] },
        }
    </script>
</body>

</html>